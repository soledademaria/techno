<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="vue.js"></script>
    <script defer src="js/main.js"></script>

    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <title>Techno</title>
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <img src="./assets/techno.svg" alt="logo" class="logo" />
        <div class="header__menu">
          <div class="header__menu-shop">
            {{totalProductsPrice | currencyType}} | {{productsInCart.length}}
          </div>
          <div class="header-menu-shop-cart-quantity">
            {{productsInCart.length}}
          </div>
        </div>
      </header>

      <!-- Lista de Produtos -->
      <section class="product-list">
        <div
          v-for="product in products"
          :key="product.id"
          class="product-list__item"
          @click="openDialog(product.id)"
        >
          <img
            :src="product.img"
            :alt="product.name"
            class="product-list__img"
          />
          <div class="product-list__item-info">
            <span class="product-list__item-price">
              {{product.price | currencyType}}
            </span>
            <h2 class="product-list__item-name">{{product.name}}</h2>
          </div>
        </div>
      </section>

      <!-- Modal com os produtos -->
      <section
        v-if="productDetail"
        class="product-dialog"
        @click="closeDialog"
      >
        <div class="product-dialog__container">
          <div class="product-dialog__container-img">
            <img
              :src="dialog.products.productImg"
              :alt="dialog.products.name"
            />
          </div>

          <div class="product-dialog__details">
            <button
              class="product-dialog__button-close-dialog"
              @click="productDetail = false"
            >
              X
            </button>

            <span class="product-dialog__price">
              {{dialog.products.price | currencyType}}
            </span>

            <h2 class="product-dialog__product-name">
              {{dialog.products.name}}
            </h2>

            <span class="product-dialog__description">
              {{dialog.products.description}}
            </span> <br>

            <button
              type="button"
              :class="[dialog.products.stock > 0 ? 'product-dialog__close-dialog' : ['product-dialog__button-close-dialog', 'product-dialog__button-disabled']]"
            @click="addProduct"
              >
              {{buttonTitle}}
            </button>
          </div>

          <div class="product-dialog__reviews"></div>
          <div class="product-dialog__review">
            <h2 class="product-dialog__review-title">Avaliações</h2>
            <ul>
              <li
                v-for="review in dialog.products.reviews"
                class="product-dialog__review-list"
              >
                <p class="product-dialog__review-description">
                  {{review.description}}
                </p>

                <p class="product-dialog__review-username">
                  {{review.name}} | {{review.stars}} estrelas
                </p>
              </li>
            </ul>
          </div>
        </div>
      </section>

      <div class="dialog-alert" :class="{active: dialogAlertActive}">
        <p class="dialog-alert__message">
          {{dialogAlertMessage}}
        </p>
      </div>
    </div>
  </body>
</html>
